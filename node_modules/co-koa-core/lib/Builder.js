"use strict";const BuilderHelper=require("./helpers/BuilderHelper.js"),echoHandler=require("echo-handler"),fs=require("fs"),stampit=require("stampit"),Builder=stampit({init(e){const r=echoHandler.configure({factoryOverride:`${__dirname}/i18n/${e.i18n}.buildMessages.json`,logger:e.logger}),i=BuilderHelper(e,r);Object.assign(this,{build(s,t){try{const l=`${s.toLowerCase()}s`,o=`${e.root}/api/${l}/`;fs.existsSync(o)?(i.appendFileCommands(fs.readdirSync(o).reduce(i.reduceToFiles,[]),s,t),r.log("success",s)):r.throw("invalidDirectory",l)}catch(e){r.throw("buildFailed",s,e.stack)}return t}})}});module.exports=(e=>Builder(e));