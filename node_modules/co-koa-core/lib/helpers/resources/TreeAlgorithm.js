"use strict";const cloneDeep=require("lodash.clonedeep"),stampit=require("stampit"),TreeAlgorithm=stampit({init(e){function t(t,l,p,s){let n=p[l[l.length-1]];if("object"==typeof n){!function(e,t,l,p,s){p.length?(o.push(e[e.length-1]),s.push(l)):(delete t[e[e.length-1]],(!t||Object.keys(t).length<1)&&(s.pop(),o.pop()))}(l,p,n,Object.keys(n),s)}else t({key:l[l.length-1],item:n,_keyTree:o,_out:e}),delete p[l[l.length-1]]}const l=cloneDeep(e);let o=[];Object.assign(this,{process(p){Object.keys(l).reduce((s,n)=>{for(s.push(l[n]),o.push(n);s.length>0;){let l=s[s.length-1];if("object"==typeof l){let e=Object.keys(l);e.length>0?t(p,e,l,s):(o.pop(),s.pop())}else p({key:n,item:l,_keyTree:[],_out:e}),s.pop()}return s},[])}})}});module.exports=(e=>TreeAlgorithm(e));